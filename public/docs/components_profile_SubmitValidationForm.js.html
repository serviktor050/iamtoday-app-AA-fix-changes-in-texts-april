<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/profile/SubmitValidationForm.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/profile/SubmitValidationForm.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { Component, PropTypes } from 'react'
import { Field, reduxForm } from 'redux-form'
import { connect } from 'react-redux'
import CheckboxProfile from '../componentKit/CheckboxProfile'
import Timer from '../componentKit/Timer'
import InputProfile from '../componentKit/InputProfile'
import SelectProgram from '../componentKit/SelectProgram'
import InputCountMask from '../componentKit/InputCountMask'
import Insurance from '../profile/Insurance'
import cookie from 'react-cookie'
import moment from 'moment'
import { api, domen } from '../../config.js'
import InputDayPicker from './InputDayPicker'
import { OKSDK } from './oksdk.js'
import MobileDayPicker from './MobileDayPicker'
import CSSModules from 'react-css-modules'
import styles from './submitValidationForm.css'
import ReactTooltip from 'react-tooltip'
import BodyParams from '../profile/BodyParams'
import Modal from 'boron/FadeModal'

const contentStyle = {
  borderRadius: '18px',
  padding: '30px'
}

const FB = window.FB

/**
 *  Компонент SubmitValidationForm.
 *  Используется для вывода формы на странице анкета
 *
 */
class SubmitValidationForm extends Component {

  /**
   * @memberof  SubmitValidationForm
   * @prop {object} propTypes - the props that are passed to this component
   * @prop {object} propTypes.initialValues Заполненные параметры с сервера
   * @prop {bool} propTypes.isBabyFeeding Есть ли блок кормление грудью
   * @prop {object} propTypes.userInfo Данные пользователя
   * @prop {object} propTypes.prevSeasons Блок Программа текущего сезона
   *
   * */

  static propTypes = {
    initialValues: PropTypes.object.isRequired,
    isBabyFeeding: PropTypes.bool,
    userInfo: PropTypes.object.isRequired,
    prevSeasons: PropTypes.array.isRequired
  }

  state = {
    item: 'one',
    height: '',
    /**
     * @memberof  SubmitValidationForm
     * Показать блок с предыдущими сезонами
     * */
    programsShow: false
  }

  componentDidMount(){
    const select = document.querySelector('.heightSelect')
    const button = select.querySelector('button')
    const divs = select.querySelectorAll('div')
    divs[4].style.lineHeight = '43px'
    button.style.display = 'none'

    document.body.addEventListener('click', (e) => {
      if(this.state.programsShow){
        this.setState({ programsShow: false});
      }
    })
  }

  updatePhoto(photoPayload) {
    return fetch(`${api}/user/user-update`, {
      headers: {
        'Accept': 'application/json',
        'Content-Type': 'application/json'
      },
      method: 'POST',
      body: JSON.stringify(photoPayload)
    })
    .then(response => response.json())
    .then(json => {})
  }

  componentWillMount() {
    let { dispatch, profileData, injuriesEx} = this.props,
      { birthday, babyBirthday, babyCount, didSports, lastBabyFeedMonth, injuryItems, diseases, injuriesExist} = profileData


    if (window.mobilecheck()) {
      contentStyle.margin = '100px'
      contentStyle.width = '300px'
    }
    // const script = document.createElement("script")

    // script.type  = "text/javascript"
    // script.text = 'http://api.ok.ru/js/fapi5.js'
    // document.body.appendChild(script)
    dispatch({ type: 'IS_INJURIES', injuriesExist: injuriesExist})
    dispatch({ type: 'IS_SPORTS', didSports: didSports})
    dispatch({ type: 'DISEASES_SET', diseases: diseases })
    dispatch({ type: 'INJURIES_GET', items: injuryItems })
    dispatch({ type: 'INJURIES_HIDDEN', injuriesHidden: injuriesEx })
    dispatch({ type: 'IS_BABY_FEEDING', isBabyFeeding: profileData.isBabyFeeding })
    if(!babyCount){
      dispatch({ type: 'CHILDS_SET', value: 'zero' })
    } else {
      dispatch({ type: 'CHILDS_SET', value: babyCount })
    }

    if(babyBirthday){
      dispatch({ type: 'BABY_BIRTHDAY', babyBirthday: moment(babyBirthday).format('YYYY-MM-DD') })
    }
    if(lastBabyFeedMonth){
      dispatch({ type: 'LAST_BABY_FEED', lastBabyFeedMonth: moment(lastBabyFeedMonth).format('YYYY-MM-DD') })
    }
  }

  loadPhoto(input){
    const { target } = input
    if (target.files &amp;&amp; target.files[0]) {
      var reader = new FileReader()

      reader.onload = e => {
        this.refs.avatar.src = e.target.result

        const payload = {
          authToken: cookie.load('token'),
          data: {
            name: target.files[0].name,
            content: reader.result.replace(/data:image\/\w+;base64,/, '')
          }
        }

        return fetch(`${api}/data/file-upload`, {
          headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json'
          },
          method: 'POST',
          body: JSON.stringify(payload)
        })
          .then(response => response.json())
          .then(json => {
            if (json.errorCode === 1 &amp;&amp; json.data) {
              const photoPayload = {
                authToken: cookie.load('token'),
                data: {
                  photo: `${api}/files/${json.data.uid}.${json.data.extension}`.replace(/api\//, '')
                }
              }

              return this.updatePhoto(photoPayload)
            }
          })
      }

      reader.readAsDataURL(target.files[0])
    }
  }

  onChangeHeight(event, index, value) {
    this.setState({ height: value});
  }

  onProgramsShow(){
    if(this.state.programsShow){
      this.setState({ programsShow: false});
    } else {
      this.setState({ programsShow: true});
    }
  }

  render() {
    const { error, valid, handleSubmit, isBabyFeeding, bodyMeasure,
      dispatch, onSubmit, initialValues, userInfo, profileData, profileFields, prevSeasons} = this.props
    const { firstName, lastName, email } = userInfo.data
    const { injuryItems, diseases } = profileFields
    let fullNameItems, passportItems, birthdayIns
    const { programName } = profileData
    const isAlfa = domen.isAlfa
    console.log('validddd')
    console.log(valid)

    if(profileData.insurance){
      fullNameItems = profileData.insurance.fullNameItems
      passportItems = profileData.insurance.passportItems
      birthdayIns = profileData.insurance.birthday
    }

    const sportsPast = [
      { text: 'Да', val: true, name:'yes' },
      { text: 'Нет', val: false, name:'no' }
    ]

    const injuriesExist = [
      { text: 'Есть', val: true, name:'yes2' },
      { text: 'Нет', val: false, name:'no2' }
    ]

    const childsItems =  [
      { text: '0', name:'zero'},
      { text: '1', name:'one'},
      { text: '2', name:'two' },
      { text: '>3', name:'third'}
    ]


    return (
      &lt;div>
      &lt;form className={styles.stageBoxBigPadding} onSubmit={handleSubmit(onSubmit)}>

        &lt;div className={styles.stageBoxInner}>
          &lt;h1 className={styles.h1}>Ваша анкета&lt;/h1>

          &lt;p className={styles.baseParag}>Именно поэтому нашим тренерам необходимо знать состояние здоровья на данный момент.&lt;/p>
          &lt;p className={styles.baseParag}>Данную анкету необходимо заполнить для Вашей же безопасности. Мы несем полную ответственность за результаты после выполнения всех составленных нами упражнениий.&lt;/p>
        &lt;/div>

        &lt;hr className={styles.hr2}/>

        &lt;div className={styles.stageBoxInner}>

          &lt;h3 className={styles.h2}>Личные данные&lt;/h3>

          &lt;div className={styles.grid}>
            &lt;div className={styles.gridCell12Mb30}>
              &lt;div className={styles.avatarWrap}>

                &lt;div className={styles.avatarProfile}>

                  &lt;label className={styles.avatarUpload} htmlFor="avatar">
                    &lt;input id="avatar"
                           type="file"
                           ref="avaInput"
                           accept="image/*"
                           onChange={input => this.loadPhoto(input)}
                           className={styles.uploadFileInput}/>
                  &lt;/label>

                  &lt;div className={styles.avatarImgWrap} onClick={() => {
                      this.refs.avaInput.click()
                  }}>
                    {!initialValues.photo ? &lt;span className={styles.avatarText}>Загрузи фотографию&lt;/span> : null}
                    &lt;img className={styles.avatarImg}
                         ref="avatar"
                         src={initialValues.photo ? initialValues.photo : '/assets/img/ico-ava-big.svg'}
                         alt=""/>

                  &lt;/div>

                &lt;/div>

                {/*&lt;p className={styles.mb20}>&lt;a href="#">Загрузить&lt;/a>&lt;/p>*/}
                {!isAlfa ?
                  &lt;div>
                    &lt;p className={styles.mb10}>Привязать социальную сеть:&lt;/p>
                    &lt;ul className={styles.socialSignin}>
                      &lt;li className={styles.socialSigninItemFb} onClick={() => {
                        FB.login(response => {
                          if (response.status === 'connected') {
                            FB.api(`/me/picture?type=normal`,
                              response => {
                                if (response.data &amp;&amp; response.data.url) {
                                  const photo = response.data.url
                                  this.refs.avatar.src = photo
                                  const photoPayload = {
                                    authToken: cookie.load('token'),
                                    data: { photo }
                                  }

                                  return this.updatePhoto(photoPayload)
                                }
                              }
                            )
                          }
                        })
                      }}>
                        &lt;svg className={styles.svgIconFb}>
                          &lt;use xlinkHref="#fb">&lt;/use>
                        &lt;/svg>
                      &lt;/li>
                      {/* &lt;li className={styles.socialSigninItemVk}>
                        &lt;svg className={styles.svgIconVk}>
                          &lt;use xlinkHref="#vk">&lt;/use>
                        &lt;/svg>
                      &lt;/li>*/}
                      &lt;li className={styles.socialSigninItemOk} onClick={() => {
                        const self = this

                        var config = {
                          app_id: 1248995328,
                          app_key: 'CBAJCDHLEBABABABA'
                        }

                        OKSDK.init(config, function () {
                          OKSDK.REST.call('users.getCurrentUser', { fields: 'pic190x190' }, function (status, data, error) {
                            if (data &amp;&amp; data.pic190x190) {
                              const photo = data.pic190x190
                              self.refs.avatar.src = photo
                              const photoPayload = {
                                authToken: cookie.load('token'),
                                data: { photo }
                              }

                              return self.updatePhoto(photoPayload)
                            }
                          })
                        }, function (error) {
                        })
                      }}>
                        &lt;svg className={styles.svgIconOk}>
                          &lt;use xlinkHref="#odnoklassniki">&lt;/use>
                        &lt;/svg>
                      &lt;/li>
                    &lt;/ul>
                  &lt;/div>
                  : null }
              &lt;/div>
            &lt;/div>

            &lt;div className={styles.gridCell12}>

              &lt;div data-tip data-for='firstName' className={styles.input}>
                &lt;Field  notReq={firstName} disabled={firstName ? true : false} name="firstName" placeholder="Имя" component={InputProfile} />
                { firstName ?&lt;ReactTooltip id='firstName'>
                  &lt;p>Для изменения обратитесь&lt;/p>
                  &lt;p>в службу поддержки!&lt;/p>
                &lt;/ReactTooltip> : null}
              &lt;/div>

              &lt;div data-tip data-for='lastName' className={styles.input}>
                &lt;Field  notReq={lastName} disabled={lastName ? true : false} name="lastName" placeholder="Фамилия" component={InputProfile} />
                {lastName ?&lt;ReactTooltip id='lastName'>
                  &lt;p>Для изменения обратитесь&lt;/p>
                  &lt;p>в службу поддержки!&lt;/p>
                &lt;/ReactTooltip> : null}
              &lt;/div>

              &lt;div data-tip data-for='birthday' className={styles.input}>
                {window.mobileAndTabletcheck()
                  ? &lt;Field name="birthday"
                          /* notReq={profileData.isFirstEdit  &amp;&amp; profileData.birthday}*/
                           value={profileData.birthday}
                           /*disabled={profileData.isFirstEdit  &amp;&amp; profileData.birthday ? true : false}*/
                           placeholder="дд-мм-гггг"
                           component={MobileDayPicker} />
                  : &lt;Field name="birthday"
                           value={profileData.birthday}
                          /* notReq={profileData.isFirstEdit  &amp;&amp; profileData.birthday}*/
                           /*disabled={profileData.isFirstEdit  &amp;&amp; profileData.birthday ? true : false}*/
                           placeholder="дд-мм-гггг"
                           component={InputDayPicker} />
                }
                {profileData.isFirstEdit  &amp;&amp; profileData.birthday ?&lt;ReactTooltip id='birthday'>
                      &lt;p>Для изменения обратитесь&lt;/p>
                      &lt;p>в службу поддержки!&lt;/p>
                  &lt;/ReactTooltip> : null}

              &lt;/div>

              &lt;div className={styles.staticField}>
                &lt;div className={styles.staticFieldName}>Программа текущего сезона: &lt;/div>
                &lt;div onClick={this.onProgramsShow.bind(this)} className={styles.staticFieldValueProgram}>{programName}&lt;/div>
                &lt;svg className={styles.svgIconAccordion}>
                  &lt;use xlinkHref="#ico-arrow-accordion">&lt;/use>
                &lt;/svg>
                &lt;div className={this.state.programsShow ? styles.staticFieldProgram : styles.staticFieldProgramHide}>
                  {prevSeasons.map(item => {
                    return (
                      &lt;div key={item.id} className={styles.staticFieldProgramLine}>
                        &lt;div className={styles.staticFieldProgramItem}>
                          &lt;span>Сезон: &lt;/span>
                          &lt;span>{item.season}&lt;/span>
                        &lt;/div>
                        &lt;div className={styles.staticFieldProgramItem60}>{item.name}&lt;/div>
                      &lt;/div>
                    )
                  })}
                &lt;/div>
              &lt;/div>
              {/* {initialValues.program !== 2 &amp;&amp;
                &lt;div>
                  &lt;label className={styles.label}>
                    &lt;p className={styles.labelTitle}>Ваш пол:&lt;/p>
                    &lt;p className={styles.labelSubTitle}>Ответ обязательный&lt;/p>
                  &lt;/label>

                  &lt; div className={styles.options}>
                    &lt;Field name="gender"  value="male" type='radio' title="Мужчина" id="male" component={RadioProfile} />
                    &lt;Field name="gender"  value="female" type='radio' title="Женщина" id="female" component={RadioProfile} />
                  &lt;/div>
                &lt;/div>
              }*/}
            &lt;/div>
          &lt;/div>

        &lt;/div>{/*stageBoxInner*/}

        &lt;hr/>

        &lt;div className={styles.stageBoxInner}>

          &lt;h3 className={styles.h2}>Контактная информация&lt;/h3>

          &lt;div className={styles.grid}>
            &lt;div className={styles.gridCell12}>

              &lt;div className={styles.input}>
                &lt;Field name="country" id="country" placeholder='Страна' component={InputProfile} />
              &lt;/div>

              &lt;div className={styles.input}>
                &lt;Field name="city" placeholder='Город' component={InputProfile} />
              &lt;/div>

              &lt;div className={styles.input}>
                &lt;Field notReq={true} name="street" placeholder='Улица' component={InputProfile} />
                &lt;div data-tooltip="Адрес для доставки призов" className={styles.inputIco}>
                  &lt;svg className={styles.svgIconFormHelp}>
                    &lt;use xlinkHref="#ico-form-help">&lt;/use>
                  &lt;/svg>
                &lt;/div>
              &lt;/div>

                { isAlfa ?
              &lt;div  className={styles.input}>
                &lt;Field  name="workPosition" placeholder="Должность" component={InputProfile} />
              &lt;/div>
                  :null }

              &lt;div className="select">
                &lt;Field name="timezone" zone={new Date().getTimezoneOffset()} options={[
              { name: 'Самоаское время UTC−11', value: -11 },
              { name: 'Гавайско-Алеутское время UTC−10', value: -10 },
              { name: 'Аляскинское время UTC−9', value: -9 },
              { name: 'Тихоокеанское время UTC-8', value: -8 },
              { name: 'Горное время UTC−7', value: -7 },
              { name: 'Центральноамериканское время UTC−6', value: -6 },
              { name: 'Североамериканское восточное время UTC−5', value: -5 },
              { name: 'Атлантическое время UTC-4', value: -4 },
              { name: 'Аргентинское время UTC-3', value: -3 },
              { name: 'Азорские острова', value: -1 },
              { name: 'Среднее время по Гринвичу UTC', value: 0 },
              { name: 'Центральноевропейское время UTC+1', value: 1 },
              { name: 'Калининград UTC+2', value: 2 },
              { name: 'Московское время UTC+3', value: 3 },
              { name: 'Ижевск, Самара UTC+4', value: 4 },
              { name: 'Екатеринбург UTC+5', value: 5 },
              { name: 'Новосибирск UTC+6', value: 6 },
              { name: 'Красноярск UTC+7', value: 7 },
              { name: 'Иркутск UTC+8', value: 8 },
              { name: 'Якустк UTC+9', value: 9 },
              { name: 'Владивосток UTC+10', value: 10 },
              { name: 'Соломоновы острова UTC+11', value: 11 }
            ]} component={SelectProgram} />
                &lt;svg className={styles.svgIconAccordion}>
                  &lt;use xlinkHref="#ico-arrow-accordion">&lt;/use>
                &lt;/svg>
              &lt;/div>



            &lt;/div>

            &lt;div className={styles.gridCell12}>

              &lt;div className={styles.input}>
                &lt;Field notReq={true} name="instagram" placeholder="Ссылка на Instagram" component={InputProfile} />
                &lt;div data-tooltip="Данное поле не обязательно для заполнения" className={styles.inputIco}>
                  &lt;svg className={styles.svgIconFormHelp}>
                    &lt;use xlinkHref="#ico-form-help">&lt;/use>
                  &lt;/svg>
                &lt;/div>
              &lt;/div>


              &lt;div data-tip data-for='email' className={styles.input}>
                &lt;Field notReq={email} disabled={email ? true : false} name="email" type="email" placeholder="Ваш email" defaultValue="anna@gmail.com" component={InputProfile} />
                {email ? &lt;ReactTooltip id='email'>
                  &lt;p>Для изменения обратитесь&lt;/p>
                  &lt;p>в службу поддержки!&lt;/p>
                &lt;/ReactTooltip> :null}
              &lt;/div>


              &lt;div className={styles.input}>{/*inputBtn*/}
                &lt;div className={styles.inputFieldWrap}>
                  &lt;Field name="phone" type="tel" placeholder="Моб. телефон" component={InputProfile} />
                   &lt;div data-tooltip="Например:&lt;br>+7 xxx xxx xx xx" className={styles.inputIco}>
                      &lt;svg className={styles.svgIconFormHelp}>
                        &lt;use xlinkHref="#ico-form-help">&lt;/use>
                      &lt;/svg>
                    &lt;/div>

                &lt;/div>
              &lt;/div>

              &lt;div className={styles.input}>
                &lt;Field
                  name="workTeam"
                  type="text"
                  notReq={true}
                  placeholder="Ваша команда"
                  component={InputProfile}
                />
                &lt;div data-tooltip="Это поле заполняется, если вы участвуете в составе команды из 5 участников" className={styles.inputIco}>
                  &lt;svg className={styles.svgIconFormHelp}>
                    &lt;use xlinkHref="#ico-form-help">&lt;/use>
                  &lt;/svg>
                &lt;/div>
              &lt;/div>

            &lt;/div>

          &lt;/div>


        &lt;/div>{/*stageBoxInner*/}

        &lt;hr/>

        {initialValues.program % 4 === 2 &amp;&amp;
        &lt;div className={styles.stageBoxInner}>

          &lt;h3 className={styles.h2}>Дети&lt;/h3>

          &lt;div className={styles.grid}>
            &lt;div className={styles.gridCell12}>

              &lt;label htmlFor="children[1]" className={styles.label}>Дата рождения последнего ребёнка&lt;/label>
              &lt;div className={styles.input}>
                {window.mobileAndTabletcheck()
                  ? &lt;Field  value={profileData.babyBirthday} name="babyBirthday" placeholder="дд-мм-гггг" component={MobileDayPicker} />
                  : &lt;Field  value={profileData.babyBirthday} name="babyBirthday" placeholder="дд-мм-гггг" component={InputDayPicker} />
                }
              &lt;/div>

              &lt;p class={styles.label}>Сколько у вас детей?&lt;/p>
              &lt;ul className={styles.options}>
                {childsItems.map((item, index) => {
                  return (&lt;li key={index} className={styles.optionsItemRadio}>
                    &lt;input type="radio"
                           name='childs'
                           className={styles.optionsRadioInput}
                           value={item.name}
                           id={item.name}
                           checked={profileFields.babyCount === item.name}
                           onChange={() => {

                            dispatch({ type: 'CHILDS_SET', value: item.name })
                      }}/>
                    &lt;label className={profileFields.babyCount === item.name ? styles.optionsItemNumbersActive : styles.optionsItemNumbers}
                           htmlFor={item.name}> {item.text}&lt;/label>
                  &lt;/li>)
                })}
              &lt;/ul>

            &lt;/div>


            &lt;div className={styles.gridCell12}>

              &lt;label htmlFor="children[2]" className={styles.label}>Месяц когда перестали кормить грудью&lt;/label>

              &lt;div className={styles.grid}>
                &lt;div className={styles.gridCell12}>
                  &lt;div className={styles.checkboxMb10Mt10 }>
                    &lt;label className={styles.checkboxLabel} htmlFor='isBabyFeeding'>
                      &lt;Field name='isBabyFeeding'
                             id="isBabyFeeding"
                             className={styles.checkboxField}
                             component={CheckboxProfile}
                             checker = {isBabyFeeding}
                             title='Я еще кормлю'
                             type="checkbox"
                             onChange={() =>{
                            dispatch({ type: 'IS_BABY_FEEDING', isBabyFeeding: !isBabyFeeding })
                            dispatch({ type: 'LAST_BABY_FEED', lastBabyFeedMonth:''})
                            }
                          }/>

                    &lt;/label>
                  &lt;/div>
                &lt;/div>
                &lt;div className={styles.gridCell12}>
                  &lt;div className={styles.input}>
                    {window.mobileAndTabletcheck()
                      ? &lt;Field   value={ profileData.lastBabyFeedMonth } disable={isBabyFeeding} name="lastBabyFeedMonth" placeholder="дд-мм-гггг" component={MobileDayPicker} />
                      : &lt;Field   value={ profileData.lastBabyFeedMonth } disable={isBabyFeeding} name="lastBabyFeedMonth" placeholder="дд-мм-гггг" component={InputDayPicker} />
                    }
                  &lt;/div>
                &lt;/div>
              &lt;/div>

            &lt;/div>

          &lt;/div>

        &lt;/div>}

        {initialValues.program % 4 === 2 &amp;&amp;&lt;hr/>}
        &lt;div className={styles.stageBoxInner}>

          &lt;h3 className={styles.h2}>Здоровье&lt;/h3>

          &lt;p className={styles.baseParag}>Для того, чтобы добиться быстрых и качественных результатов тренеру важно знать некоторые особенности твоего организма. Это поможет ему правильно распределить нагрузкуна мышцы и организовать последовательность тренировок, не навредив твоему организму.&lt;/p>

          &lt;p className={styles.baseParag}>Посчитай сколько раз ты &lt;a href="#">приседаешь&lt;/a> за 1 минуту и запиши цифру!&lt;/p>

          &lt;div className={styles.gridMt30}>
            &lt;div className={styles.gridCell12}>
              &lt;Timer timer={{
              minutes: 1,
              seconds: 5
            }}/>
            &lt;/div>

            &lt;div className={styles.gridCell12}>
              &lt;div className={styles.input}>
                &lt;div className={styles.inputFieldWrap}>
                  &lt;Field name="squatsCount" placeholder="Результат (ко-во)" component={InputCountMask} />
                &lt;/div>
                {/*    &lt;div className="btn btn--base">Сохранить&lt;/div>*/}
              &lt;/div>
            &lt;/div>
          &lt;/div>

        &lt;/div>

        &lt;hr/>

        &lt;div className={styles.stageBoxInner}>

          &lt;div className={styles.grid}>
            &lt;div className={styles.gridCell12}>

              &lt;label className={styles.label}>
                &lt;p className={styles.labelTitle}>Занимался спортом раньше?&lt;/p>
                &lt;p className={styles.labelSubTitle}>Пожалуйста, ваш ответ очень важен для нас&lt;/p>
              &lt;/label>

              &lt;ul className={styles.options}>
                {sportsPast.map((item, index) => (
                  &lt;li key={index} className={styles.optionsItemRadio48}>
                  &lt;input type="radio"
                      name='didSports'
                      className={styles.optionsRadioInput}
                      id={item.name}
                      value={item.name}
                      checked={profileFields.didSports === item.val}
                      onChange={() => {
                        dispatch({ type: 'IS_SPORTS', didSports: item.val})
                      }}/>
                  &lt;label className={profileFields.didSports === item.val ? styles.optionsItemActive : styles.optionsItem}
                          htmlFor={item.name}> {item.text}
                  &lt;/label>
                  &lt;/li>

                ))}
              &lt;/ul>

            &lt;/div>

            &lt;div className={styles.gridCell12}>

              &lt;label className={styles.label}>
                &lt;p className={styles.labelTitle}>Есть травмы или проблемные зоны?&lt;/p>
                &lt;p className={styles.labelSubTitle}>Ответ обязательный&lt;/p>
              &lt;/label>

              &lt;ul className={styles.options}>
                {injuriesExist.map((item, index) => (
                  &lt;li key={index} className={styles.optionsItemRadio48}>
                    &lt;input type="radio"
                           name='injuriesExist'
                           className={styles.optionsRadioInput}
                           id={item.name}
                           value={item.name}
                           checked={profileFields.injuriesExist === item.val}
                           onChange={() => {
                        dispatch({ type: 'IS_INJURIES', injuriesExist: item.val})
                      }}/>
                    &lt;label className={profileFields.injuriesExist === item.val ? styles.optionsItemActive : styles.optionsItem}
                           htmlFor={item.name}> {item.text}
                    &lt;/label>
                  &lt;/li>

                ))}
              &lt;/ul>


              {profileFields.injuriesExist ?
              &lt;div className={styles.grid}>
                &lt;div className={styles.gridCell12}>
                  &lt;ul className={styles.checkboxes}>
                    &lt;li className={styles.checkboxesItem}>
                          &lt;span className={styles.checkbox}>
                              &lt;label className={styles.checkboxLabel} htmlFor='neck'>
                                &lt;Field className="checkbox__field"
                                       name='neck'
                                       id='neck'
                                       value = {injuryItems.neck}
                                       checker = {injuryItems.neck}
                                       component={CheckboxProfile}
                                       title='Шея и плечи'
                                       onChange={() =>{
                                         injuryItems['neck'] = !injuryItems['neck']
                                         dispatch({ type: 'INJURIES_GET', items: injuryItems })
                                      }}
                               />
                              &lt;/label>
                          &lt;/span>
                      &lt;/li>
                    &lt;li className={styles.checkboxesItem}>
                          &lt;span className={styles.checkbox}>
                              &lt;label className={styles.checkboxLabel} htmlFor='hands'>
                                &lt;Field className="checkbox__field"
                                       name='hands'
                                       id='hands'
                                       value = {injuryItems.hands}
                                       checker = {injuryItems.hands}
                                       component={CheckboxProfile}
                                       title='Руки'
                                       onChange={() =>{
                                         injuryItems['hands'] = !injuryItems['hands']
                                         dispatch({ type: 'INJURIES_GET', items: injuryItems })
                                      }}
                                />
                              &lt;/label>
                          &lt;/span>
                    &lt;/li>



                  &lt;/ul>
                &lt;/div>
                &lt;div className={styles.gridCell12}>
                  &lt;ul className={styles.checkboxes}>
                    &lt;li className={styles.checkboxesItem}>
                          &lt;span className={styles.checkbox}>
                              &lt;label className={styles.checkboxLabel} htmlFor='back'>
                                &lt;Field className="checkbox__field"
                                       name='back'
                                       id='back'
                                       value = {injuryItems.back}
                                       checker = {injuryItems.back}
                                       component={CheckboxProfile}
                                       title='Спина'
                                       onChange={() =>{
                                         injuryItems['back'] = !injuryItems['back']
                                         dispatch({ type: 'INJURIES_GET', items: injuryItems })
                                      }}
                                />
                              &lt;/label>
                          &lt;/span>
                    &lt;/li>
                    &lt;li className={styles.checkboxesItem}>
                          &lt;span className={styles.checkbox}>
                              &lt;label className={styles.checkboxLabel} htmlFor='knees'>
                                &lt;Field className="checkbox__field"
                                       name='knees'
                                       id='knees'
                                       value = {injuryItems.knees}
                                       checker= {injuryItems.knees}
                                       component={CheckboxProfile}
                                       title='Колени'
                                       onChange={() =>{
                                         injuryItems['knees'] = !injuryItems['knees']
                                         dispatch({ type: 'INJURIES_GET', items: injuryItems })
                                      }}
                                />
                              &lt;/label>
                          &lt;/span>
                    &lt;/li>
                  &lt;/ul>
                &lt;/div>
              &lt;/div>
                : null}

              {profileFields.injuriesExist ?
                  &lt;div className={styles.textareaMt20}>
                    &lt;textarea className={styles.textareaField}
                              defaultValue={diseases}
                              onChange={(event) =>{
                                dispatch({ type: 'DISEASES_SET', diseases: event.target.value })
                              }}
                              placeholder="Дополнительная информация о травмах/проблемных зонах">


                    &lt;/textarea>
                  &lt;/div>
                : null}

            &lt;/div>

          &lt;/div>


          &lt;div className={styles.profileBtnsSave}>
            {/* &lt;span className="btn btn--base">Cохранить, но не отправлять&lt;/span>*/}
            &lt;button type='submit' className={styles.btnPrimaryCenter} onClick={() => {
              console.log('clickkk')
                if (!valid) {
                  console.log('!valid')
                  this.refs.submitFailModal.show()
                }
              }}>
              Отправить анкету
            &lt;/button>
          &lt;/div>

        &lt;/div>
      &lt;/form>

        &lt;BodyParams bodyMeasure={bodyMeasure}/>

        {!isAlfa ?
        &lt;Insurance docs={initialValues.insuranceFile}
                                 profileData={profileData}
                                 initialValues={{

                                    ...fullNameItems,
                                    ...passportItems,
                                     birthday:birthdayIns,
                                     passport:profileData.passport
                                 }}
                                 onSubmitAction={ data => {
                                         const payload = {
                                            authToken: cookie.load('token'),
                                            data: {
                                                fullNameItems:{
                                                  firstName:data.firstName,
                                                  lastName:data.lastName,
                                                  middleName:data.middleName
                                                },
                                                passportItems:{
                                                  city:data.city,
                                                  issueCode:data.issueCode,
                                                  issueDate:data.issueDate,
                                                  issuePlace:data.issuePlace,
                                                  number:data.number

                                                },
                                                birthday:data.birthday,
                                                passport: data.passport,
                                                dateStart: '2016-05-29',
                                                dateEnd: '2016-11-29',
                                                amount: 100000
                                                //isActive: false
                                            }
                                          }
                                    return fetch(`${api}/user/insurance-create`, {
                                      headers: {
                                        'Accept': 'application/json',
                                        'Content-Type': 'application/json'
                                      },
                                      method: 'POST',
                                      body: JSON.stringify(payload)
                                    })
                                    .then(response => response.json())
                                    .then(json => {
                                        if (json.errorCode === 1 &amp;&amp; json.data ){
                                          this.refs.successModal.show()
                                        } else {
                                          this.refs.failModal.show()
                                        }
                                      })
                                }}/>
          : null
        }

        &lt;Modal ref='loadingModal' contentStyle={contentStyle} backdrop={false}>
          &lt;div className={styles.entryHeader}>
            &lt;h2 className={styles.entryTitleCenter}>Загружается...&lt;/h2>
          &lt;/div>
          &lt;div className={styles.textCenter}>
            &lt;div className={styles.loaderMain}>&lt;/div>
          &lt;/div>
        &lt;/Modal>
        &lt;Modal ref='failValidationModal' contentStyle={contentStyle}>
          &lt;h2>Данные могут содержать только цифры с точкой&lt;/h2>
          &lt;br/>
          &lt;div className={styles.btnAction} onClick={() => this.refs.failValidationModal.hide()}>
            Продолжить
          &lt;/div>
        &lt;/Modal>
        &lt;Modal ref='failValidationEmptyModal' contentStyle={contentStyle}>
          &lt;h2>Некоторые данные не заполнены!&lt;/h2>
          &lt;br/>
          &lt;div className={styles.btnAction} onClick={() => this.refs.failValidationEmptyModal.hide()}>
            Продолжить
          &lt;/div>
        &lt;/Modal>
        &lt;Modal ref='failModal' contentStyle={contentStyle}>
          &lt;h2>Что-то пошло не так, поробуйте снова&lt;/h2>
          &lt;br/>
          &lt;div className={styles.btnAction} onClick={() => this.refs.failModal.hide()}>
            Продолжить
          &lt;/div>
        &lt;/Modal>
        &lt;Modal ref='submitFailModal' contentStyle={contentStyle}>
          &lt;h2>Одно или несколько полей были заполнены не правильно, проверьте вашу анкету еще раз&lt;/h2>
          &lt;br/>
          &lt;div className={styles.btnAction} onClick={() => this.refs.submitFailModal.hide()}>
            Продолжить
          &lt;/div>
        &lt;/Modal>
        &lt;Modal ref='successModal' contentStyle={contentStyle}>
          &lt;h2>Данные добавлены!&lt;/h2>
          &lt;br/>
          &lt;div className={styles.btnAction} onClick={() => this.refs.successModal.hide()}>
            Продолжить
          &lt;/div>
        &lt;/Modal>

      &lt;/div>
    )
  }
}

const validate = data => {
  const errors = {}
  data.firstName.replace(/ /g, '')
  data.lastName.replace(/ /g, '')

  switch (true) {
    case !data.firstName:
      errors.firstName = 'Имя должно быть заполнено'
      break
    case data.firstName.length &lt; 3:
      errors.firstName = 'Имя должно быть длиннее 3 символов'
      break
    case data.firstName.length > 1000:
      errors.firstName = 'Имя должно быть короче 1000 символов'
      break
    // case !/^[A-Za-z0-9А-Яа-я]{3,20}$/.test(data.firstName):
    //   errors.firstName = 'Имя может содержать только буквы английского/русского алфавитов и цифры'
    //   break
    default:
      break
  }

  switch (true) {
    case !data.lastName:
      errors.lastName = 'Фамилия должна быть заполнена'
      break
    case data.lastName.length &lt; 3:
      errors.lastName = 'Фамилия должна быть длиннее 3 символов'
      break
    case data.lastName.length > 1000:
      errors.lastName = 'Фамилия должна быть короче 1000 символов'
      break
    default:
      break
  }

  if (!data.gender) {
    errors.gender = ' (Пол должен быть заполнен)'
  }

  if (!data.country) {
    errors.country = 'Поле страны должно быть заполнено'
  }

  if (!data.city) {
    errors.city = 'Город должнен быть заполнен'
  }

  switch (true) {
    case !data.phone:
      errors.phone = 'Поле телефона должно быть заполнено'
      break
    case data.phone.length &lt; 6:
      errors.phone = 'Поле телефона должно быть длиннее 3 символов'
      break
    case data.phone.length > 30:
      errors.phone = 'Поле телефона должно быть короче 30 символов'
      break
    case !/^[+\s0-9]{6,20}$/.test(data.phone):
      errors.phone = 'Поле должно содержать только цифры, знак +'
      break
    default:
      break
  }

  switch (true) {
    case !data.email:
      errors.email = 'Email должен быть заполнен'
      break
    case !/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(data.email):
      errors.email = 'Email заполнен неправильно, проверьте его еще раз'
      break
    default:
      break
  }

  if(moment().diff(moment(data.birthday), 'years') &lt; 18){
    errors.birthday = 'До 18 лет участие в марафоне запрещено'
  }

  if (!data.birthday) {
    errors.birthday = 'Поле должно быть заполнено'
  }

  if (!data.babyBirthday) {
    errors.babyBirthday = 'Поле должно быть заполнено'
  }

  if (!data.lastBabyFeedMonth) {
    errors.lastBabyFeedMonth = 'Поле должно быть заполнено'
  }

  if (!data.squatsCount) {
    errors.squatsCount = 'Количество приседаний должно быть заполнено'
  }

  if (data.didSports === undefined) {
    errors.didSports = 'Поле спорт должно быть отмечено'
  }

  if (data.injuriesExist === undefined) {
    errors.injuriesExist = 'Поле травмы должно быть отмечено'
  }

  // if (!data.diseasesExist) {
  //   errors.diseasesExist = 'Поле хронические заболевания должно быть отмечено'
  // } else if (data.diseasesExist &amp;&amp; data.diseases.length === 0 &amp;&amp; !data.diseasesAnother) {
  //   errors.diseases = 'Выберите хронические заболевания'
  // }

  // if (!data.pressure) {
  //   errors.pressure = 'Поле давление должно быть отмечено'
  // }
  //
  // if (!data.badHabbitsExist) {
  //   errors.badHabbitsExist = 'Поле вредные привычки должно быть отмечено'
  // }

  return errors
}

SubmitValidationForm = reduxForm({
  form: 'submitValidation',
  validate
})(SubmitValidationForm)



const mapStateToProps = state => {
  const { bodyParams, injuriesHidden, profileFields, selectedTaskDay, sportsPast, isBabyFeeding, userInfo, sign } = state

  return {
    bodyParams,
    sign,
    injuriesHidden,
    sportsPast,
    selectedTaskDay,
    profileFields,
    isBabyFeeding,
    userInfo
  }
}

SubmitValidationForm = connect(
  mapStateToProps
)(SubmitValidationForm)

export default CSSModules(SubmitValidationForm, styles)
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="BodyParams.html">BodyParams</a></li><li><a href="CalendarList.html">CalendarList</a></li><li><a href="Chat.html">Chat</a></li><li><a href="ChatBlock.html">ChatBlock</a></li><li><a href="ChatContent.html">ChatContent</a></li><li><a href="ChatPage.html">ChatPage</a></li><li><a href="DayEditor.html">DayEditor</a></li><li><a href="DayEditorValidationForm.html">DayEditorValidationForm</a></li><li><a href="ErrorReport.html">ErrorReport</a></li><li><a href="Faq.html">Faq</a></li><li><a href="Food.html">Food</a></li><li><a href="FoodEditorValidationForm.html">FoodEditorValidationForm</a></li><li><a href="Insurance.html">Insurance</a></li><li><a href="Layout.html">Layout</a></li><li><a href="Menu.html">Menu</a></li><li><a href="Partners.html">Partners</a></li><li><a href="PendingEvents.html">PendingEvents</a></li><li><a href="PendingMinionChats.html">PendingMinionChats</a></li><li><a href="PendingPhotos.html">PendingPhotos</a></li><li><a href="Photos.html">Photos</a></li><li><a href="PhotosIntro.html">PhotosIntro</a></li><li><a href="ProfileCreate.html">ProfileCreate</a></li><li><a href="ProfileLogin.html">ProfileLogin</a></li><li><a href="ProfilePasswordForget.html">ProfilePasswordForget</a></li><li><a href="ProfilePasswordRestore.html">ProfilePasswordRestore</a></li><li><a href="ProfilePay.html">ProfilePay</a></li><li><a href="ProfileSignup.html">ProfileSignup</a></li><li><a href="ProfileSignupParams.html">ProfileSignupParams</a></li><li><a href="Reports.html">Reports</a></li><li><a href="Seasons.html">Seasons</a></li><li><a href="SeasonSignupParams.html">SeasonSignupParams</a></li><li><a href="SendReport.html">SendReport</a></li><li><a href="SubmitValidationForm.html">SubmitValidationForm</a></li><li><a href="SuccessProfile.html">SuccessProfile</a></li><li><a href="TodayTask.html">TodayTask</a></li><li><a href="UserReports.html">UserReports</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Fri Mar 02 2018 11:43:51 GMT+0300 (RTZ 2 (зима))
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
